---
import { LOCALES, type Locale } from '../i18n/config';
import { t } from '../i18n/ui';
import { routeFor, type TranslationKey } from '../i18n/routes';

const { locale, translationKey } = Astro.locals as { locale: Locale; translationKey: TranslationKey };
const locales = [...LOCALES];
---

<nav class="header-top">
  <div class="container-lg">
    <div class="header-top__inner">
      <ul class="lang-switcher">
        {locales.map((lang) => (
          <li>
            <a
              href={routeFor(lang, translationKey)}
              lang={lang}
              aria-current={lang === locale ? 'page' : undefined}
              class:list={['lang-link', { active: lang === locale }]}
            >
              {lang.toUpperCase()}
            </a>
          </li>
        ))}
      </ul>

      <div class="federal">
        <span class="federal__label">{t(locale, 'federalHeader')}</span>
        <a href={`https://belgium.be/${locale}`} target="_blank" rel="noreferrer" class="federal__link">
          belgium.be
        </a>
      </div>
    </div>
  </div>
</nav>

<header id="page-header" class="page-header">
  <div class="container-lg">
    <a href={routeFor(locale, 'home')} class="brand">
      {t(locale, 'siteTitle')}
    </a>
  </div>
</header>

<style>
  .header-top__inner {
    display: flex;
    gap: 1rem;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 0;
    border-bottom: 1px solid rgba(0, 0, 0, 0.12);
  }
  .lang-switcher {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }
  .lang-link {
    text-decoration: none;
    color: inherit;
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Apple Color Emoji',
      'Segoe UI Emoji';
    font-size: 0.875rem;
  }
  .lang-link.active {
    font-weight: 700;
    text-decoration: underline;
  }
  .federal {
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }
  .federal__label {
    font-size: 0.875rem;
    opacity: 0.9;
  }
  .federal__link {
    font-size: 0.875rem;
    color: inherit;
  }
  .page-header {
    padding: 1rem 0;
  }
  .brand {
    text-decoration: none;
    color: inherit;
    font-weight: 700;
  }
</style>

